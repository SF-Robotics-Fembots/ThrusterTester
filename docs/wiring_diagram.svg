<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 700">
  <defs>
    <style>
      .title { font: bold 24px sans-serif; fill: #333; }
      .subtitle { font: 14px sans-serif; fill: #666; }
      .component-label { font: bold 12px sans-serif; fill: #333; }
      .pin-label { font: 10px monospace; fill: #333; }
      .pin-label-small { font: 8px monospace; fill: #555; }
      .wire-label { font: 9px sans-serif; fill: #333; }
      .warning { font: bold 11px sans-serif; fill: #c00; }
      .note { font: 10px sans-serif; fill: #666; }
      .address { font: 9px monospace; fill: #006; }
    </style>
    <!-- Arrow marker -->
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="900" height="700" fill="#f8f9fa"/>

  <!-- Title -->
  <text x="450" y="35" text-anchor="middle" class="title">Thruster Tester Wiring Diagram</text>
  <text x="450" y="55" text-anchor="middle" class="subtitle">Raspberry Pi 5 + INA228 + HX711 (Hardware PWM)</text>

  <!-- ==================== RASPBERRY PI 5 ==================== -->
  <g transform="translate(50, 90)">
    <!-- Board outline -->
    <rect x="0" y="0" width="180" height="280" rx="8" fill="#2d5016" stroke="#1a3009" stroke-width="2"/>
    <rect x="10" y="10" width="160" height="260" rx="4" fill="#3d6b1e"/>

    <!-- Label -->
    <text x="90" y="-10" text-anchor="middle" class="component-label">RASPBERRY PI 5</text>

    <!-- USB ports (right side) -->
    <rect x="170" y="30" width="20" height="25" fill="#333" rx="2"/>
    <rect x="170" y="60" width="20" height="25" fill="#333" rx="2"/>
    <rect x="170" y="100" width="20" height="40" fill="#336" rx="2"/>
    <rect x="170" y="145" width="20" height="40" fill="#336" rx="2"/>

    <!-- Ethernet -->
    <rect x="170" y="200" width="20" height="50" fill="#996" rx="2"/>

    <!-- GPIO Header -->
    <rect x="25" y="25" width="70" height="240" fill="#222" rx="2"/>
    <text x="60" y="20" text-anchor="middle" class="pin-label-small" fill="#fff">GPIO HEADER</text>

    <!-- GPIO Pins - Left column (odd pins) -->
    <g fill="#fc0">
      <!-- Pin 1 - 3.3V -->
      <circle cx="35" cy="40" r="4"/><text x="18" y="43" class="pin-label-small" fill="#ffa">3V3</text>
      <!-- Pin 3 - SDA -->
      <circle cx="35" cy="55" r="4" fill="#4af"/><text x="12" y="58" class="pin-label-small" fill="#4af">SDA</text>
      <!-- Pin 5 - SCL -->
      <circle cx="35" cy="70" r="4" fill="#4af"/><text x="12" y="73" class="pin-label-small" fill="#4af">SCL</text>
      <!-- Pin 7 -->
      <circle cx="35" cy="85" r="4" fill="#4c4"/>
      <!-- Pin 9 - GND -->
      <circle cx="35" cy="100" r="4" fill="#333" stroke="#666"/><text x="12" y="103" class="pin-label-small" fill="#aaa">GND</text>
      <!-- Pin 11 -->
      <circle cx="35" cy="115" r="4" fill="#4c4"/>
      <!-- Pins 13-25 -->
      <circle cx="35" cy="130" r="4" fill="#4c4"/>
      <circle cx="35" cy="145" r="4" fill="#4c4"/>
      <circle cx="35" cy="160" r="4" fill="#fc0"/>
      <circle cx="35" cy="175" r="4" fill="#4c4"/>
      <circle cx="35" cy="190" r="4" fill="#4c4"/>
      <circle cx="35" cy="205" r="4" fill="#4c4"/>
      <circle cx="35" cy="220" r="4" fill="#333" stroke="#666"/>
      <!-- Pin 29 - GPIO5 -->
      <circle cx="35" cy="235" r="4" fill="#f4a"/><text x="5" y="238" class="pin-label-small" fill="#f4a">GP5</text>
      <!-- Pin 31 - GPIO6 -->
      <circle cx="35" cy="250" r="4" fill="#f4a"/><text x="5" y="253" class="pin-label-small" fill="#f4a">GP6</text>
    </g>

    <!-- GPIO Pins - Right column (even pins) -->
    <g>
      <!-- Pin 2 - 5V -->
      <circle cx="85" cy="40" r="4" fill="#f44"/><text x="92" y="43" class="pin-label-small" fill="#f66">5V</text>
      <!-- Pin 4 - 5V -->
      <circle cx="85" cy="55" r="4" fill="#f44"/><text x="92" y="58" class="pin-label-small" fill="#f66">5V</text>
      <!-- Pin 6 - GND -->
      <circle cx="85" cy="70" r="4" fill="#333" stroke="#666"/><text x="92" y="73" class="pin-label-small" fill="#aaa">GND</text>
      <!-- Pins 8-10 -->
      <circle cx="85" cy="85" r="4" fill="#4c4"/>
      <circle cx="85" cy="100" r="4" fill="#4c4"/>
      <!-- Pin 12 - GPIO18 PWM -->
      <circle cx="85" cy="115" r="4" fill="#f90"/><text x="92" y="118" class="pin-label-small" fill="#f90">PWM</text>
      <circle cx="85" cy="130" r="4" fill="#4c4"/>
      <!-- Pin 14 - GND -->
      <circle cx="85" cy="145" r="4" fill="#333" stroke="#666"/><text x="92" y="148" class="pin-label-small" fill="#aaa">GND</text>
      <circle cx="85" cy="160" r="4" fill="#4c4"/>
      <circle cx="85" cy="175" r="4" fill="#4c4"/>
      <circle cx="85" cy="190" r="4" fill="#4c4"/>
      <circle cx="85" cy="205" r="4" fill="#333" stroke="#666"/>
      <circle cx="85" cy="220" r="4" fill="#4c4"/>
      <circle cx="85" cy="235" r="4" fill="#333" stroke="#666"/>
      <circle cx="85" cy="250" r="4" fill="#4c4"/>
    </g>

    <!-- Pin numbers -->
    <text x="60" y="275" text-anchor="middle" class="pin-label-small" fill="#aaa">1-40</text>
  </g>

  <!-- ==================== INA228 ==================== -->
  <g transform="translate(320, 110)">
    <!-- Board outline -->
    <rect x="0" y="0" width="140" height="120" rx="5" fill="#4a148c" stroke="#2a0a4c" stroke-width="2"/>

    <!-- Label -->
    <text x="70" y="-10" text-anchor="middle" class="component-label">INA228</text>
    <text x="70" y="5" text-anchor="middle" class="address">(Power Monitor)</text>
    <text x="70" y="18" text-anchor="middle" class="address">Addr: 0x41</text>

    <!-- I2C pins (left side) -->
    <rect x="-5" y="35" width="10" height="8" fill="#fc0"/>
    <text x="-15" y="42" text-anchor="end" class="pin-label">VCC</text>

    <rect x="-5" y="50" width="10" height="8" fill="#333"/>
    <text x="-15" y="57" text-anchor="end" class="pin-label">GND</text>

    <rect x="-5" y="65" width="10" height="8" fill="#4af"/>
    <text x="-15" y="72" text-anchor="end" class="pin-label">SDA</text>

    <rect x="-5" y="80" width="10" height="8" fill="#4af"/>
    <text x="-15" y="87" text-anchor="end" class="pin-label">SCL</text>

    <!-- Power measurement pins (right side) -->
    <rect x="135" y="45" width="10" height="8" fill="#f44"/>
    <text x="150" y="52" text-anchor="start" class="pin-label">IN+</text>

    <rect x="135" y="65" width="10" height="8" fill="#333"/>
    <text x="150" y="72" text-anchor="start" class="pin-label">IN-</text>
  </g>

  <!-- ==================== HX711 ==================== -->
  <g transform="translate(320, 300)">
    <!-- Board outline -->
    <rect x="0" y="0" width="140" height="110" rx="5" fill="#006064" stroke="#003d40" stroke-width="2"/>

    <!-- Label -->
    <text x="70" y="-10" text-anchor="middle" class="component-label">HX711</text>
    <text x="70" y="5" text-anchor="middle" class="address">(Load Cell Amp)</text>

    <!-- Pi connection pins (left side) -->
    <rect x="-5" y="30" width="10" height="8" fill="#f44"/>
    <text x="-15" y="37" text-anchor="end" class="pin-label">VCC</text>

    <rect x="-5" y="45" width="10" height="8" fill="#333"/>
    <text x="-15" y="52" text-anchor="end" class="pin-label">GND</text>

    <rect x="-5" y="60" width="10" height="8" fill="#f4a"/>
    <text x="-15" y="67" text-anchor="end" class="pin-label">DOUT</text>

    <rect x="-5" y="75" width="10" height="8" fill="#f4a"/>
    <text x="-15" y="82" text-anchor="end" class="pin-label">SCK</text>

    <!-- Load cell pins (right side) -->
    <rect x="135" y="25" width="10" height="8" fill="#f44"/>
    <text x="150" y="32" text-anchor="start" class="pin-label">E+</text>

    <rect x="135" y="40" width="10" height="8" fill="#333"/>
    <text x="150" y="47" text-anchor="start" class="pin-label">E-</text>

    <rect x="135" y="60" width="10" height="8" fill="#fff" stroke="#333"/>
    <text x="150" y="67" text-anchor="start" class="pin-label">A-</text>

    <rect x="135" y="75" width="10" height="8" fill="#4c4"/>
    <text x="150" y="82" text-anchor="start" class="pin-label">A+</text>
  </g>

  <!-- ==================== LOAD CELL ==================== -->
  <g transform="translate(550, 300)">
    <!-- Load cell body -->
    <rect x="0" y="0" width="120" height="80" rx="3" fill="#ddd" stroke="#999" stroke-width="2"/>
    <rect x="20" y="20" width="80" height="40" fill="#ccc" stroke="#999"/>
    <text x="60" y="45" text-anchor="middle" class="component-label">LOAD CELL</text>

    <!-- Strain gauge symbol -->
    <path d="M35 30 L45 30 L40 35 L50 35 L45 40 L55 40 L50 45 L60 45" stroke="#666" fill="none" stroke-width="1.5"/>

    <!-- Wires coming out -->
    <line x1="0" y1="25" x2="-30" y2="25" stroke="#f44" stroke-width="3"/>
    <line x1="0" y1="40" x2="-30" y2="40" stroke="#333" stroke-width="3"/>
    <line x1="0" y1="55" x2="-30" y2="55" stroke="#fff" stroke-width="3"/>
    <line x1="0" y1="70" x2="-30" y2="70" stroke="#4c4" stroke-width="3"/>

    <!-- Wire labels -->
    <text x="-35" y="28" text-anchor="end" class="pin-label-small">Red (E+)</text>
    <text x="-35" y="43" text-anchor="end" class="pin-label-small">Blk (E-)</text>
    <text x="-35" y="58" text-anchor="end" class="pin-label-small">Wht (A-)</text>
    <text x="-35" y="73" text-anchor="end" class="pin-label-small">Grn (A+)</text>
  </g>

  <!-- ==================== ESC ==================== -->
  <g transform="translate(550, 110)">
    <!-- ESC body -->
    <rect x="0" y="0" width="100" height="70" rx="5" fill="#333" stroke="#111" stroke-width="2"/>
    <text x="50" y="25" text-anchor="middle" fill="#fff" class="component-label">ESC</text>
    <text x="50" y="40" text-anchor="middle" fill="#aaa" class="pin-label-small">Motor Controller</text>

    <!-- Input wires (from Pi GPIO) -->
    <rect x="-5" y="20" width="10" height="6" fill="#f90"/>
    <text x="-10" y="26" text-anchor="end" class="pin-label">Signal</text>

    <rect x="-5" y="35" width="10" height="6" fill="#333" stroke="#666"/>
    <text x="-10" y="41" text-anchor="end" class="pin-label">GND</text>

    <!-- Power wires -->
    <rect x="-5" y="55" width="10" height="6" fill="#f44"/>
    <text x="-10" y="61" text-anchor="end" class="pin-label">Batt+</text>

    <!-- Output to motor -->
    <rect x="95" y="30" width="10" height="8" fill="#00f"/>
    <rect x="95" y="42" width="10" height="8" fill="#ff0"/>
    <rect x="95" y="54" width="10" height="8" fill="#0f0"/>
    <text x="110" y="50" text-anchor="start" class="pin-label">Motor</text>
  </g>

  <!-- ==================== THRUSTER ==================== -->
  <g transform="translate(700, 90)">
    <!-- Motor body -->
    <ellipse cx="50" cy="50" rx="45" ry="45" fill="#444" stroke="#222" stroke-width="3"/>
    <ellipse cx="50" cy="50" rx="30" ry="30" fill="#555"/>
    <circle cx="50" cy="50" r="10" fill="#333"/>

    <!-- Propeller blades -->
    <ellipse cx="50" cy="20" rx="8" ry="20" fill="#666" transform="rotate(0, 50, 50)"/>
    <ellipse cx="50" cy="20" rx="8" ry="20" fill="#666" transform="rotate(120, 50, 50)"/>
    <ellipse cx="50" cy="20" rx="8" ry="20" fill="#666" transform="rotate(240, 50, 50)"/>

    <text x="50" y="115" text-anchor="middle" class="component-label">THRUSTER</text>
  </g>

  <!-- ==================== POWER SUPPLY ==================== -->
  <g transform="translate(550, 420)">
    <!-- Battery/PSU -->
    <rect x="0" y="0" width="120" height="60" rx="5" fill="#666" stroke="#333" stroke-width="2"/>
    <rect x="120" y="15" width="8" height="30" fill="#888"/>
    <text x="60" y="25" text-anchor="middle" fill="#fff" class="component-label">POWER</text>
    <text x="60" y="42" text-anchor="middle" fill="#ccc" class="pin-label">12-24V Battery</text>

    <!-- Terminals -->
    <rect x="-5" y="15" width="10" height="10" fill="#f44"/>
    <text x="-10" y="23" text-anchor="end" class="pin-label">+</text>
    <rect x="-5" y="35" width="10" height="10" fill="#333"/>
    <text x="-10" y="43" text-anchor="end" class="pin-label">-</text>
  </g>

  <!-- ==================== WIRING ==================== -->

  <!-- I2C Bus wires (SDA - Blue) -->
  <g stroke="#4af" stroke-width="2.5" fill="none">
    <!-- Pi SDA to INA228 SDA -->
    <path d="M 85 145 L 280 145 L 280 175 L 315 175"/>
  </g>

  <!-- I2C Bus wires (SCL - Light Blue) -->
  <g stroke="#2196F3" stroke-width="2.5" fill="none">
    <!-- Pi SCL to INA228 SCL -->
    <path d="M 85 160 L 270 160 L 270 190 L 315 190"/>
  </g>

  <!-- 3.3V Power (Yellow/Orange) to INA228 -->
  <g stroke="#fc0" stroke-width="2" fill="none">
    <path d="M 85 130 L 260 130 L 260 145 L 315 145"/>
  </g>

  <!-- GND wires (Black/Gray) -->
  <g stroke="#555" stroke-width="2" fill="none">
    <!-- Pi GND to INA228 GND -->
    <path d="M 135 160 L 250 160 L 250 160 L 315 160"/>
    <!-- Pi GND to HX711 GND -->
    <path d="M 135 235 L 250 235 L 250 345 L 315 345"/>
    <!-- Junction -->
    <circle cx="250" cy="160" r="3" fill="#555"/>
  </g>

  <!-- 5V to HX711 (Red) -->
  <path d="M 135 130 L 240 130 L 240 330 L 315 330" stroke="#f44" stroke-width="2" fill="none"/>

  <!-- GPIO5 to HX711 DOUT (Pink) -->
  <path d="M 85 325 L 200 325 L 200 360 L 315 360" stroke="#f4a" stroke-width="2.5" fill="none"/>

  <!-- GPIO6 to HX711 SCK (Pink) -->
  <path d="M 85 340 L 190 340 L 190 375 L 315 375" stroke="#e91e63" stroke-width="2.5" fill="none"/>

  <!-- GPIO18 (PWM) to ESC Signal (Orange) -->
  <path d="M 135 205 L 500 205 L 500 130 L 545 130" stroke="#f90" stroke-width="3" fill="none"/>

  <!-- Pi GND to ESC GND -->
  <path d="M 250 160 L 250 145 L 510 145 L 545 145" stroke="#555" stroke-width="2" fill="none"/>

  <!-- ESC to Motor -->
  <path d="M 660 155 L 700 155" stroke="#666" stroke-width="4" fill="none"/>

  <!-- Power to ESC -->
  <path d="M 545 435 L 510 435 L 510 165 L 545 165" stroke="#f44" stroke-width="3" fill="none"/>

  <!-- Power to INA228 (through measurement) -->
  <path d="M 545 435 L 490 435 L 490 155 L 475 155" stroke="#f44" stroke-width="3" fill="none" stroke-dasharray="5,3"/>
  <path d="M 475 175 L 480 175 L 480 455 L 545 455" stroke="#333" stroke-width="3" fill="none" stroke-dasharray="5,3"/>

  <!-- Load cell wires to HX711 -->
  <path d="M 475 325 L 520 325" stroke="#f44" stroke-width="2" fill="none"/>
  <path d="M 475 340 L 520 340" stroke="#333" stroke-width="2" fill="none"/>
  <path d="M 475 360 L 520 355" stroke="#aaa" stroke-width="2" fill="none"/>
  <path d="M 475 375 L 520 370" stroke="#4c4" stroke-width="2" fill="none"/>

  <!-- ==================== LEGEND ==================== -->
  <g transform="translate(700, 250)">
    <rect x="0" y="0" width="180" height="170" rx="5" fill="#fff" stroke="#ccc" stroke-width="1"/>
    <text x="90" y="18" text-anchor="middle" class="component-label">WIRE COLOR LEGEND</text>

    <line x1="15" y1="36" x2="45" y2="36" stroke="#4af" stroke-width="3"/>
    <text x="55" y="40" class="pin-label">I2C SDA</text>

    <line x1="15" y1="52" x2="45" y2="52" stroke="#2196F3" stroke-width="3"/>
    <text x="55" y="56" class="pin-label">I2C SCL</text>

    <line x1="15" y1="68" x2="45" y2="68" stroke="#fc0" stroke-width="3"/>
    <text x="55" y="72" class="pin-label">3.3V Power</text>

    <line x1="15" y1="84" x2="45" y2="84" stroke="#f44" stroke-width="3"/>
    <text x="55" y="88" class="pin-label">5V / Battery +</text>

    <line x1="15" y1="100" x2="45" y2="100" stroke="#555" stroke-width="3"/>
    <text x="55" y="104" class="pin-label">Ground (GND)</text>

    <line x1="15" y1="116" x2="45" y2="116" stroke="#f4a" stroke-width="3"/>
    <text x="55" y="120" class="pin-label">GPIO (Data)</text>

    <line x1="15" y1="132" x2="45" y2="132" stroke="#f90" stroke-width="3"/>
    <text x="55" y="136" class="pin-label">PWM Signal</text>

    <line x1="15" y1="148" x2="45" y2="148" stroke="#888" stroke-width="3" stroke-dasharray="5,3"/>
    <text x="55" y="152" class="pin-label">Current Path</text>
  </g>

  <!-- ==================== I2C / PWM INFO ==================== -->
  <g transform="translate(700, 430)">
    <rect x="0" y="0" width="180" height="80" rx="5" fill="#e3f2fd" stroke="#2196F3" stroke-width="1"/>
    <text x="90" y="16" text-anchor="middle" class="component-label">PIN INFO</text>
    <text x="15" y="32" class="pin-label">I2C Address:</text>
    <text x="25" y="46" class="pin-label-small">INA228: 0x41</text>
    <text x="15" y="62" class="pin-label">PWM Pin:</text>
    <text x="25" y="76" class="pin-label-small">GPIO 18 (Pin 12) - Hardware PWM</text>
  </g>

  <!-- ==================== WARNINGS ==================== -->
  <g transform="translate(50, 530)">
    <rect x="0" y="0" width="630" height="90" rx="5" fill="#ffebee" stroke="#c00" stroke-width="2"/>
    <text x="315" y="22" text-anchor="middle" class="warning">⚠ SAFETY WARNINGS ⚠</text>
    <text x="20" y="42" class="note">• ALWAYS disconnect thruster/propeller before testing PWM signals</text>
    <text x="20" y="56" class="note">• Ensure common ground between all components</text>
    <text x="20" y="70" class="note">• INA228 must be wired IN-LINE to measure current (between power supply and ESC)</text>
    <text x="20" y="84" class="note">• Do NOT connect ESC's red power wire to Pi - ESC is powered by main battery</text>
  </g>

</svg>
